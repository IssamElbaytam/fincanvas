!function t(i,e,n){function s(r,c){if(!e[r]){if(!i[r]){var a="function"==typeof require&&require;if(!c&&a)return a(r,!0);if(o)return o(r,!0);throw new Error("Cannot find module '"+r+"'")}var h=e[r]={exports:{}};i[r][0].call(h.exports,function(t){var e=i[r][1][t];return s(e?e:t)},h,h.exports,t,i,e,n)}return e[r].exports}for(var o="function"==typeof require&&require,r=0;r<n.length;r++)s(n[r]);return s}({1:[function(t,i,e){"use strict";function n(t,i){Object.defineProperty(this,t,{value:i,writable:!1,enumerable:!0,configurable:!1})}function s(t,i){n.call(this,"x",Number(t)||0),n.call(this,"y",Number(i)||0)}function o(t,i,e,o){t=Number(t)||0,i=Number(i)||0,e=Number(e)||0,o=Number(o)||0,0>e&&(t+=e,e=-e),0>o&&(i+=o,o=-o),n.call(this,"origin",new s(t,i)),n.call(this,"extent",new s(e,o)),n.call(this,"corner",new s(t+e,i+o)),n.call(this,"center",new s(t+e/2,i+o/2))}s.prototype={plus:function(t){return new s(this.x+t.x,this.y+t.y)},plusXY:function(t,i){return new s(this.x+(t||0),this.y+(i||0))},minus:function(t){return new s(this.x-t.x,this.y-t.y)},min:function(t){return new s(Math.min(this.x,t.x),Math.min(this.y,t.y))},max:function(t){return new s(Math.max(this.x,t.x),Math.max(this.y,t.y))},distance:function(t){var i=t.x-this.x,e=t.y-this.y;return Math.sqrt(i*i+e*e)},equals:function(t){var i=!1;return t&&(i=this.x===t.x&&this.y===t.y),i},greaterThan:function(t){return this.x>t.x&&this.y>t.y},lessThan:function(t){return this.x<t.x&&this.y<t.y},greaterThanOrEqualTo:function(t){return this.x>=t.x&&this.y>=t.y},lessThanOrEqualTo:function(t){return this.x<=t.x&&this.y<=t.y},within:function(t){var i=t.origin.x,e=i+t.extent.x,n=t.origin.y,s=n+t.extent.y;return t.extent.x<0&&(i=e,e=t.origin.x),t.extent.y<0&&(n=s,s=t.origin.y),i<=this.x&&this.x<e&&n<=this.y&&this.y<s}},s.prototype.EQ=s.prototype.equals,s.prototype.GT=s.prototype.greaterThan,s.prototype.LT=s.prototype.lessThan,s.prototype.GE=s.prototype.greaterThanOrEqualTo,s.prototype.LE=s.prototype.lessThanOrEqualTo,o.prototype={get top(){return this.origin.y},get left(){return this.origin.x},get bottom(){return this.corner.y},get right(){return this.corner.x},get width(){return this.extent.x},get height(){return this.extent.y},get area(){return this.width*this.height},flattenXAt:function(t){return new o(t,this.origin.y,0,this.extent.y)},flattenYAt:function(t){return new o(this.origin.x,t,this.extent.x,0)},contains:function(t){return t.within(this)},within:function(t){return t.origin.lessThanOrEqualTo(this.origin)&&t.corner.greaterThanOrEqualTo(this.corner)},growBy:function(t){return new o(this.origin.x+t,this.origin.y+t,this.extent.x-t-t,this.extent.y-t-t)},shrinkBy:function(t){return this.growBy(-t)},union:function(t){var i=this.origin.min(t.origin),e=this.corner.max(t.corner),n=e.minus(i);return new o(i.x,i.y,n.x,n.y)},forEach:function(t,i){i=i||this;for(var e=this.origin.x,n=this.corner.x;n>e;e++)for(var s=this.origin.y,o=this.corner.y;o>s;s++)t.call(i,e,s)},intersect:function(t,i,e){var n=null,s=this.origin.max(t.origin),r=this.corner.min(t.corner),c=r.minus(s);return c.x>0&&c.y>0?n=new o(s.x,s.y,c.x,c.y):"function"==typeof i&&(n=i.call(e||this,t)),n},intersects:function(t){return t.corner.x>this.origin.x&&t.corner.y>this.origin.y&&t.origin.x<this.corner.x&&t.origin.y<this.corner.y}},e.Point=s,e.Rectangle=o},{}],2:[function(t,i,e){"use strict";window.fin||(window.fin={}),window.fin.Canvas||(window.fin.Canvas=t("./"))},{"./":3}],3:[function(t,i,e){"use strict";function n(t,i,e){var n=this;this.div=t,this.component=i,e=e||{},this.doubleClickDelay=e.doubleClickDelay||325,this.dragEndtime=Date.now(),this.canvas=document.createElement("canvas"),this.div.appendChild(this.canvas),this.canvas.style.outline="none",this.canvasCTX=this.canvas.getContext("2d"),this.gc=new a(this.canvasCTX),this.buffer=document.createElement("canvas"),this.bufferCTX=this.buffer.getContext("2d"),this.bufferGC=new a(this.bufferCTX),this.mouseLocation=new c.Point(-1,-1),this.dragstart=new c.Point(-1,-1),this.bounds=new c.Rectangle(0,0,0,0),this.hasMouse=!1,document.addEventListener("mousemove",function(t){(n.hasMouse||n.isDragging())&&n.finmousemove(t)}),document.addEventListener("mouseup",function(t){n.finmouseup(t)}),document.addEventListener("wheel",function(t){n.finwheelmoved(t)}),document.addEventListener("keydown",function(t){n.finkeydown(t)}),document.addEventListener("keyup",function(t){n.finkeyup(t)}),this.canvas.onmouseover=function(){n.hasMouse=!0},this.canvas.addEventListener("focus",function(t){n.finfocusgained(t)}),this.canvas.addEventListener("blur",function(t){n.finfocuslost(t)}),this.canvas.addEventListener("mousedown",function(t){n.finmousedown(t)}),this.canvas.addEventListener("mouseout",function(t){n.hasMouse=!1,n.finmouseout(t)}),this.canvas.addEventListener("click",function(t){n.finclick(t)}),this.canvas.addEventListener("contextmenu",function(t){return n.fincontextmenu(t),t.preventDefault(),!1}),this.canvas.setAttribute("tabindex",0),this.canvas.contentEditable=!0,this.resize(),this.beginResizing(),this.beginPainting()}function s(t){if(f){for(var i=0;i<u.length;i++)try{u[i].tickPainter(t)}catch(e){console.error(e)}requestAnimationFrame(s)}}function o(t){if(d)for(var i=0;i<l.length;i++)try{l[i].tickResizer(t)}catch(e){console.error(e)}}function r(){for(var t=[],i=["",""],e=0;256>e;e++)t[e]=i;return t[27]=["ESC","ESCSHIFT"],t[192]=["`","~"],t[49]=["1","!"],t[50]=["2","@"],t[51]=["3","#"],t[52]=["4","$"],t[53]=["5","%"],t[54]=["6","^"],t[55]=["7","&"],t[56]=["8","*"],t[57]=["9","("],t[48]=["0",")"],t[189]=["-","_"],t[187]=["=","+"],t[8]=["BACKSPACE","BACKSPACESHIFT"],t[46]=["DELETE","DELETESHIFT"],t[9]=["TAB","TABSHIFT"],t[81]=["q","Q"],t[87]=["w","W"],t[69]=["e","E"],t[82]=["r","R"],t[84]=["t","T"],t[89]=["y","Y"],t[85]=["u","U"],t[73]=["i","I"],t[79]=["o","O"],t[80]=["p","P"],t[219]=["[","{"],t[221]=["]","}"],t[220]=["\\","|"],t[220]=["CAPSLOCK","CAPSLOCKSHIFT"],t[65]=["a","A"],t[83]=["s","S"],t[68]=["d","D"],t[70]=["f","F"],t[71]=["g","G"],t[72]=["h","H"],t[74]=["j","J"],t[75]=["k","K"],t[76]=["l","L"],t[186]=[";",":"],t[222]=["'","|"],t[13]=["RETURN","RETURNSHIFT"],t[16]=["SHIFT","SHIFT"],t[90]=["z","Z"],t[88]=["x","X"],t[67]=["c","C"],t[86]=["v","V"],t[66]=["b","B"],t[78]=["n","N"],t[77]=["m","M"],t[188]=[",","<"],t[190]=[".",">"],t[191]=["/","?"],t[16]=["SHIFT","SHIFT"],t[17]=["CTRL","CTRLSHIFT"],t[18]=["ALT","ALTSHIFT"],t[91]=["COMMANDLEFT","COMMANDLEFTSHIFT"],t[32]=["SPACE","SPACESHIFT"],t[93]=["COMMANDRIGHT","COMMANDRIGHTSHIFT"],t[18]=["ALT","ALTSHIFT"],t[38]=["UP","UPSHIFT"],t[37]=["LEFT","LEFTSHIFT"],t[40]=["DOWN","DOWNSHIFT"],t[39]=["RIGHT","RIGHTSHIFT"],t[33]=["PAGEUP","PAGEUPSHIFT"],t[34]=["PAGEDOWN","PAGEDOWNSHIFT"],t[35]=["PAGERIGHT","PAGERIGHTSHIFT"],t[36]=["PAGELEFT","PAGELEFTSHIFT"],t[112]=["F1","F1SHIFT"],t[113]=["F2","F2SHIFT"],t[114]=["F3","F3SHIFT"],t[115]=["F4","F4SHIFT"],t[116]=["F5","F5SHIFT"],t[117]=["F6","F6SHIFT"],t[118]=["F7","F7SHIFT"],t[119]=["F8","F8SHIFT"],t[120]=["F9","F9SHIFT"],t[121]=["F10","F10SHIFT"],t[122]=["F11","F1S1HIFT"],t[123]=["F12","F121HIFT"],t}var c=t("rectangular"),a=t("./js/GraphicsContext.js"),h=200,u=[],l=[],f=!0,d=!0,g=r();n.prototype={constructor:n.prototype.constructor,div:null,component:null,canvas:null,canvasCTX:null,focuser:null,buffer:null,ctx:null,mouseLocation:null,dragstart:null,origin:null,bounds:null,dirty:!1,size:null,mousedown:!1,dragging:!1,repeatKeyCount:0,repeatKey:null,repeatKeyStartTime:0,currentKeys:[],hasMouse:!1,lastDoubleClickTime:0,dragEndTime:0,lastRepaintTime:0,currentPaintCount:0,currentFPS:0,lastFPSComputeTime:0,addEventListener:function(t,i){this.canvas.addEventListener(t,i)},stopPaintLoop:function(){f=!1},restartPaintLoop:function(){f||(f=!0,requestAnimationFrame(s))},stopResizeLoop:function(){d=!1},restartResizeLoop:function(){d||(d=!0,setInterval(o,200))},detached:function(){this.stopPainting(),this.stopResizing()},useHiDPI:function(){return this.component.resolveProperty("useHiDPI")},useBitBlit:function(){return this.component.resolveProperty("useBitBlit")},getFPS:function(){var t=this.component.resolveProperty("repaintIntervalRate");return t?parseInt(t):0},getEnableContinuousRepaint:function(){return this.component.resolveProperty("enableContinuousRepaint")},getCurrentFPS:function(){return this.currentFPS},tickPaint:function(t){var i=this.getFPS(),e=this.getEnableContinuousRepaint();if(0!==i){var n=1e3/i,s=t-this.lastRepaintTime;s>n&&(e||this.dirty)&&(this.paintNow(),this.lastRepaintTime=t,e&&(this.currentPaintCount++,t-this.lastFPSComputeTime>=1e3&&(this.currentFPS=1e3*this.currentPaintCount/(t-this.lastFPSComputeTime),this.currentPaintCount=0,this.lastFPSComputeTime=t)))}},beginPainting:function(){var t=this;this.dirty=!0,this.tickPainter=function(i){t.tickPaint(i)},u.push(this)},stopPainting:function(){u.splice(u.indexOf(this),1)},beginResizing:function(){var t=this;this.tickResizer=function(){t.checksize()},l.push(this)},stopResizing:function(){l.splice(l.indexOf(this),1)},start:function(){this.beginPainting(),this.beginResizing()},stop:function(){this.stopPainting(),this.stopResizing()},checksize:function(){var t=this.div.getBoundingClientRect();(t.width!==this.size.width||t.height!==this.size.height)&&this.sizeChangedNotification()},sizeChangedNotification:function(){this.resize()},resize:function(){var t=this.size=this.div.getBoundingClientRect();this.width=t.width,this.height=t.height;var i=1,e=this.useBitBlit(),n=window.devicePixelRatio&&this.useHiDPI();if(n){var s=window.devicePixelRatio||1,o=this.canvasCTX.webkitBackingStorePixelRatio||this.canvasCTX.mozBackingStorePixelRatio||this.canvasCTX.msBackingStorePixelRatio||this.canvasCTX.oBackingStorePixelRatio||this.canvasCTX.backingStorePixelRatio||1;i=s/o}this.buffer.width=this.canvas.width=this.width*i,this.buffer.height=this.canvas.height=this.height*i,this.canvas.style.width=this.buffer.style.width=this.width+"px",this.canvas.style.height=this.buffer.style.height=this.height+"px",this.bufferCTX.scale(i,i),n&&!e&&this.canvasCTX.scale(i,i),this.bounds=new c.Rectangle(0,0,this.width,this.height);var r=this.component;r&&r.setBounds(this.bounds),this.resizeNotification(),this.paintNow()},resizeNotification:function(){},getBounds:function(){return this.bounds},paintNow:function(){var t=this;this.safePaintImmediately(function(i){i.clearRect(0,0,t.width,t.height);var e=t.component;e&&e.paint(i),t.dirty=!1})},safePaintImmediately:function(t){var i=this.useBitBlit(),e=i?this.bufferGC:this.gc;try{e.save(),t(e)}catch(n){console.error(n)}finally{e.restore()}i&&this.flushBuffer()},flushBuffer:function(){this.buffer.width>0&&this.buffer.height>0&&this.canvasCTX.drawImage(this.buffer,0,0)},dispatchNewEvent:function(t,i,e){return e={detail:e||{}},e.detail.primitiveEvent=t,this.canvas.dispatchEvent(new CustomEvent(i,e))},dispatchNewMouseKeysEvent:function(t,i,e){return e=e||{},e.mouse=this.mouseLocation,e.keys=this.currentKeys,this.dispatchNewEvent(t,i,e)},finmousemove:function(t){!this.isDragging()&&this.mousedown&&(this.beDragging(),this.dispatchNewMouseKeysEvent(t,"fin-canvas-dragstart",{isRightClick:this.isRightClick(t)}),this.dragstart=new c.Point(this.mouseLocation.x,this.mouseLocation.y)),this.mouseLocation=this.getLocal(t),this.isDragging()&&this.dispatchNewMouseKeysEvent(t,"fin-canvas-drag",{dragstart:this.dragstart,isRightClick:this.isRightClick(t)}),this.bounds.contains(this.mouseLocation)&&this.dispatchNewMouseKeysEvent(t,"fin-canvas-mousemove")},finmousedown:function(t){this.mouseLocation=this.mouseDownLocation=this.getLocal(t),this.mousedown=!0,this.dispatchNewMouseKeysEvent(t,"fin-canvas-mousedown",{isRightClick:this.isRightClick(t)}),this.takeFocus()},finmouseup:function(t){this.isDragging()&&(this.dispatchNewMouseKeysEvent(t,"fin-canvas-dragend",{dragstart:this.dragstart,isRightClick:this.isRightClick(t)}),this.beNotDragging(),this.dragEndtime=Date.now()),this.mousedown=!1,this.dispatchNewMouseKeysEvent(t,"fin-canvas-mouseup",{isRightClick:this.isRightClick(t)})},finmouseout:function(t){this.mousedown||(this.mouseLocation=new c.Point(-1,-1)),this.dispatchNewMouseKeysEvent(t,"fin-canvas-mouseout")},finwheelmoved:function(t){!this.isDragging()&&this.hasFocus()&&(t.preventDefault(),this.dispatchNewMouseKeysEvent(t,"fin-canvas-wheelmoved",{isRightClick:this.isRightClick(t)}))},finclick:function(t){this.doubleClickTimer&&Date.now()-this.lastClickTime<this.doubleClickDelay?(clearTimeout(this.doubleClickTimer),this.doubleClickTimer=void 0,this.findblclick(t)):(this.lastClickTime=Date.now(),this.doubleClickTimer=setTimeout(function(){this.doubleClickTimer=void 0,this.mouseLocation=this.getLocal(t),this.dispatchNewMouseKeysEvent(t,"fin-canvas-click",{isRightClick:this.isRightClick(t)})}.bind(this),this.doubleClickDelay))},findblclick:function(t){this.mouseLocation=this.getLocal(t),this.lastDoubleClickTime=Date.now(),this.dispatchNewMouseKeysEvent(t,"fin-canvas-dblclick",{isRightClick:this.isRightClick(t)})},getCharMap:function(){return g},finkeydown:function(t){if(this.hasFocus()){var i=t.shiftKey?g[t.keyCode][1]:g[t.keyCode][0];t.repeat?this.repeatKey===i?this.repeatKeyCount++:(this.repeatKey=i,this.repeatKeyStartTime=Date.now()):(this.repeatKey=null,this.repeatKeyCount=0,this.repeatKeyStartTime=0),-1===this.currentKeys.indexOf(i)&&this.currentKeys.push(i),this.dispatchNewEvent(t,"fin-canvas-keydown",{alt:t.altKey,ctrl:t.ctrlKey,"char":i,code:t.charCode,key:t.keyCode,meta:t.metaKey,repeatCount:this.repeatKeyCount,repeatStartTime:this.repeatKeyStartTime,shift:t.shiftKey,identifier:t.key,currentKeys:this.currentKeys.slice(0)})}},finkeyup:function(t){var i=t.shiftKey?g[t.keyCode][1]:g[t.keyCode][0];this.currentKeys.splice(this.currentKeys.indexOf(i),1),this.hasFocus()&&(this.repeatKeyCount=0,this.repeatKey=null,this.repeatKeyStartTime=0,this.dispatchNewEvent(t,"fin-canvas-keyup",{alt:t.altKey,ctrl:t.ctrlKey,"char":i,code:t.charCode,key:t.keyCode,meta:t.metaKey,repeat:t.repeat,shift:t.shiftKey,identifier:t.key,currentKeys:this.currentKeys.slice(0)}))},finfocusgained:function(t){this.dispatchNewEvent(t,"fin-canvas-focus-gained")},finfocuslost:function(t){this.dispatchNewEvent(t,"fin-canvas-focus-lost")},fincontextmenu:function(t){t.ctrlKey&&-1===this.currentKeys.indexOf("CTRL")&&this.currentKeys.push("CTRL"),this.doubleRightClickTimer&&Date.now()-this.lastClickTime<this.doubleClickDelay?(clearTimeout(this.doubleRightClickTimer),this.doubleRightClickTimer=void 0,this.findblclick(t)):(this.lastClickTime=Date.now(),this.doubleRightClickTimer=setTimeout(function(){this.doubleRightClickTimer=void 0,this.dispatchNewMouseKeysEvent(t,"fin-canvas-context-menu",{isRightClick:this.isRightClick(t)})}.bind(this),this.doubleClickDelay))},repaint:function(){var t=this.getFPS();this.dirty=!0,f&&0!==t||this.paintNow()},getMouseLocation:function(){return this.mouseLocation},getOrigin:function(){var t=this.canvas.getBoundingClientRect(),i=new c.Point(t.left,t.top);return i},getLocal:function(t){var i=this.canvas.getBoundingClientRect(),e=new c.Point(t.clientX-i.left,t.clientY-i.top);return e},hasFocus:function(){return document.activeElement===this.canvas},takeFocus:function(){var t=this;this.hasFocus()||setTimeout(function(){t.canvas.focus()},10)},beDragging:function(){this.dragging=!0,this.disableDocumentElementSelection()},beNotDragging:function(){this.dragging=!1,this.enableDocumentElementSelection()},isDragging:function(){return this.dragging},disableDocumentElementSelection:function(){var t=document.body.style;t.cssText=t.cssText+"-webkit-user-select: none"},enableDocumentElementSelection:function(){var t=document.body.style;t.cssText=t.cssText.replace("-webkit-user-select: none","")},setFocusable:function(t){this.focuser.style.display=t?"":"none"},isRightClick:function(t){var i;return t=t||window.event,"which"in t?i=3===t.which:"button"in t&&(i=2===t.button),i},dispatchEvent:function(t){return this.canvas.dispatchEvent(t)}},requestAnimationFrame(s),setInterval(o,h),i.exports=n},{"./js/GraphicsContext.js":4,rectangular:1}],4:[function(t,i,e){"use strict";function n(t,i){function e(e){e in n.prototype||r.test(e)||("function"==typeof t[e]?o[e]=i?function(){return i(e,arguments,t[e].apply(t,arguments))}:t[e].bind(t):Object.defineProperty(o,e,{get:function(){var n=t[e];return i?i(e,"getter",n):n},set:function(n){t[e]=i?i(e,"setter",n):n}}))}this.gc=t;var o=this,r=/^webkit/;switch(typeof i){case"string":i=s.bind(void 0,i+".");break;case"boolean":i===!0&&(i=s.bind(void 0,"gc."));break;case"function":if(3!==i.length)throw"GraphicsContext: User-supplied API logger function does not accept three parameters.";break;default:i=!1}Object.keys(Object.getPrototypeOf(t)).forEach(e),Object.keys(t).forEach(e)}var s=t("./gc-console-logger");i.exports=n},{"./gc-console-logger":5}],5:[function(t,i,e){"use strict";function n(t,i,e,n){var o=n;switch("string"==typeof n&&(o='"'+o+'"'),i=t+i,e){case"getter":console.log(i,"=",o);break;case"setter":console.log(i,s,o);break;default:i+="("+Array.prototype.slice.call(e).join(", ")+")",void 0===o?console.log(i):console.log(i,s,o)}return n}var s="⟹";i.exports=n},{}]},{},[2]);